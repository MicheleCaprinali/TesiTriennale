{
  "timestamp": "2025-09-30 20:55:13",
  "analysis_type": "Metriche Software - Focus Complessit√† Ciclomatica",
  "project_root": "..\\src",
  "summary": {
    "total_files": 7,
    "total_lines": 1470,
    "code_lines": 1101,
    "total_functions": 50,
    "total_classes": 4
  },
  "complexity_analysis": {
    "total_functions": 50,
    "avg_complexity": 3.74,
    "max_complexity": 24,
    "min_complexity": 1,
    "distribution": {
      "bassa_1_5": 86.0,
      "media_6_10": 10.0,
      "alta_11_15": 0.0,
      "molto_alta_16+": 4.0
    }
  },
  "complexity_stats": {
    "qualita_complessita": "Eccellente",
    "funzioni_problematiche": 2,
    "percentuale_buona_qualita": 96.0
  },
  "detailed_metrics": {
    "files": 7,
    "total_lines": 1470,
    "code_lines": 1101,
    "comment_lines": 70,
    "blank_lines": 299,
    "functions": 50,
    "classes": 4,
    "complexity_issues": 2,
    "long_functions": 4,
    "file_details": [
      {
        "file_name": "creazione_vectorstore.py",
        "file_path": "..\\src\\creazione_vectorstore.py",
        "total_lines": 157,
        "code_lines": 117,
        "comment_lines": 5,
        "blank_lines": 35,
        "functions": 3,
        "classes": 0,
        "long_functions": 0,
        "complexity_issues": 0,
        "avg_line_length": 32.52866242038217,
        "complexity_details": [
          {
            "function_name": "clean_text",
            "complexity": 1,
            "line_start": 13,
            "level": "Bassa"
          },
          {
            "function_name": "crea_vectorstore_free",
            "complexity": 3,
            "line_start": 18,
            "level": "Bassa"
          },
          {
            "function_name": "search_vectorstore",
            "complexity": 2,
            "line_start": 66,
            "level": "Bassa"
          }
        ]
      },
      {
        "file_name": "dividi_chunks.py",
        "file_path": "..\\src\\dividi_chunks.py",
        "total_lines": 91,
        "code_lines": 72,
        "comment_lines": 4,
        "blank_lines": 15,
        "functions": 3,
        "classes": 0,
        "long_functions": 0,
        "complexity_issues": 0,
        "avg_line_length": 37.0,
        "complexity_details": [
          {
            "function_name": "split_text_in_chunks",
            "complexity": 1,
            "line_start": 4,
            "level": "Bassa"
          },
          {
            "function_name": "split_text_in_chunks_simple",
            "complexity": 2,
            "line_start": 19,
            "level": "Bassa"
          },
          {
            "function_name": "save_chunks_to_file",
            "complexity": 3,
            "line_start": 29,
            "level": "Bassa"
          }
        ]
      },
      {
        "file_name": "link_enhancer.py",
        "file_path": "..\\src\\link_enhancer.py",
        "total_lines": 251,
        "code_lines": 172,
        "comment_lines": 24,
        "blank_lines": 55,
        "functions": 11,
        "classes": 1,
        "long_functions": 0,
        "complexity_issues": 0,
        "avg_line_length": 39.211155378486055,
        "complexity_details": [
          {
            "function_name": "__init__",
            "complexity": 1,
            "line_start": 12,
            "level": "Bassa"
          },
          {
            "function_name": "enhance_response",
            "complexity": 1,
            "line_start": 27,
            "level": "Bassa"
          },
          {
            "function_name": "_clean_malformed_links",
            "complexity": 1,
            "line_start": 43,
            "level": "Bassa"
          },
          {
            "function_name": "_enhance_contact_formatting",
            "complexity": 6,
            "line_start": 58,
            "level": "Media"
          },
          {
            "function_name": "_add_contact_section_if_missing",
            "complexity": 3,
            "line_start": 96,
            "level": "Bassa"
          },
          {
            "function_name": "_get_minimal_footer",
            "complexity": 1,
            "line_start": 117,
            "level": "Bassa"
          },
          {
            "function_name": "count_links",
            "complexity": 1,
            "line_start": 150,
            "level": "Bassa"
          },
          {
            "function_name": "get_enhancement_stats",
            "complexity": 2,
            "line_start": 168,
            "level": "Bassa"
          },
          {
            "function_name": "_count_malformed_patterns",
            "complexity": 2,
            "line_start": 182,
            "level": "Bassa"
          },
          {
            "function_name": "validate_links",
            "complexity": 5,
            "line_start": 197,
            "level": "Bassa"
          },
          {
            "function_name": "replace_phone",
            "complexity": 2,
            "line_start": 70,
            "level": "Bassa"
          }
        ]
      },
      {
        "file_name": "local_embeddings.py",
        "file_path": "..\\src\\local_embeddings.py",
        "total_lines": 132,
        "code_lines": 103,
        "comment_lines": 6,
        "blank_lines": 23,
        "functions": 6,
        "classes": 1,
        "long_functions": 0,
        "complexity_issues": 0,
        "avg_line_length": 37.52272727272727,
        "complexity_details": [
          {
            "function_name": "__init__",
            "complexity": 4,
            "line_start": 24,
            "level": "Bassa"
          },
          {
            "function_name": "embed_documents",
            "complexity": 4,
            "line_start": 35,
            "level": "Bassa"
          },
          {
            "function_name": "embed_query",
            "complexity": 4,
            "line_start": 49,
            "level": "Bassa"
          },
          {
            "function_name": "get_model_info",
            "complexity": 3,
            "line_start": 62,
            "level": "Bassa"
          },
          {
            "function_name": "compute_similarity",
            "complexity": 5,
            "line_start": 76,
            "level": "Bassa"
          },
          {
            "function_name": "batch_embed_with_metadata",
            "complexity": 3,
            "line_start": 92,
            "level": "Bassa"
          }
        ]
      },
      {
        "file_name": "ollama_llm.py",
        "file_path": "..\\src\\ollama_llm.py",
        "total_lines": 490,
        "code_lines": 382,
        "comment_lines": 23,
        "blank_lines": 85,
        "functions": 17,
        "classes": 1,
        "long_functions": 2,
        "complexity_issues": 1,
        "avg_line_length": 37.47551020408163,
        "complexity_details": [
          {
            "function_name": "test_ollama_connection",
            "complexity": 3,
            "line_start": 464,
            "level": "Bassa"
          },
          {
            "function_name": "__init__",
            "complexity": 6,
            "line_start": 45,
            "level": "Media"
          },
          {
            "function_name": "is_running",
            "complexity": 5,
            "line_start": 67,
            "level": "Bassa"
          },
          {
            "function_name": "check_connection",
            "complexity": 1,
            "line_start": 85,
            "level": "Bassa"
          },
          {
            "function_name": "list_models",
            "complexity": 4,
            "line_start": 89,
            "level": "Bassa"
          },
          {
            "function_name": "generate",
            "complexity": 24,
            "line_start": 101,
            "level": "Molto Alta"
          },
          {
            "function_name": "_get_fallback_prompt",
            "complexity": 1,
            "line_start": 218,
            "level": "Bassa"
          },
          {
            "function_name": "_process_response",
            "complexity": 6,
            "line_start": 235,
            "level": "Media"
          },
          {
            "function_name": "_remove_repetitions",
            "complexity": 5,
            "line_start": 260,
            "level": "Bassa"
          },
          {
            "function_name": "_is_valid_response",
            "complexity": 5,
            "line_start": 276,
            "level": "Bassa"
          },
          {
            "function_name": "get_performance_stats",
            "complexity": 4,
            "line_start": 297,
            "level": "Bassa"
          },
          {
            "function_name": "_classify_performance",
            "complexity": 4,
            "line_start": 352,
            "level": "Bassa"
          },
          {
            "function_name": "health_check",
            "complexity": 7,
            "line_start": 363,
            "level": "Media"
          },
          {
            "function_name": "pull_model",
            "complexity": 3,
            "line_start": 398,
            "level": "Bassa"
          },
          {
            "function_name": "delete_model",
            "complexity": 3,
            "line_start": 414,
            "level": "Bassa"
          },
          {
            "function_name": "get_model_info",
            "complexity": 5,
            "line_start": 429,
            "level": "Bassa"
          },
          {
            "function_name": "_determine_category",
            "complexity": 6,
            "line_start": 444,
            "level": "Media"
          }
        ]
      },
      {
        "file_name": "prompt_templates.py",
        "file_path": "..\\src\\prompt_templates.py",
        "total_lines": 262,
        "code_lines": 186,
        "comment_lines": 8,
        "blank_lines": 68,
        "functions": 8,
        "classes": 1,
        "long_functions": 1,
        "complexity_issues": 0,
        "avg_line_length": 38.4236641221374,
        "complexity_details": [
          {
            "function_name": "get_optimized_prompt",
            "complexity": 1,
            "line_start": 250,
            "level": "Bassa"
          },
          {
            "function_name": "__init__",
            "complexity": 1,
            "line_start": 11,
            "level": "Bassa"
          },
          {
            "function_name": "optimize_prompt",
            "complexity": 1,
            "line_start": 15,
            "level": "Bassa"
          },
          {
            "function_name": "_categorize_question",
            "complexity": 3,
            "line_start": 32,
            "level": "Bassa"
          },
          {
            "function_name": "_load_patterns",
            "complexity": 1,
            "line_start": 43,
            "level": "Bassa"
          },
          {
            "function_name": "_load_templates",
            "complexity": 1,
            "line_start": 66,
            "level": "Bassa"
          },
          {
            "function_name": "_optimize_context",
            "complexity": 3,
            "line_start": 214,
            "level": "Bassa"
          },
          {
            "function_name": "_get_priority_keywords",
            "complexity": 1,
            "line_start": 237,
            "level": "Bassa"
          }
        ]
      },
      {
        "file_name": "testi_estratti.py",
        "file_path": "..\\src\\testi_estratti.py",
        "total_lines": 87,
        "code_lines": 69,
        "comment_lines": 0,
        "blank_lines": 18,
        "functions": 2,
        "classes": 0,
        "long_functions": 1,
        "complexity_issues": 1,
        "avg_line_length": 31.2183908045977,
        "complexity_details": [
          {
            "function_name": "pdf_to_txt_with_inline_links",
            "complexity": 18,
            "line_start": 4,
            "level": "Molto Alta"
          },
          {
            "function_name": "flush_buffer",
            "complexity": 5,
            "line_start": 24,
            "level": "Bassa"
          }
        ]
      }
    ],
    "avg_lines_per_file": 210.0,
    "code_to_comment_ratio": 6.357856494096276,
    "complexity_analysis": {
      "total_functions": 50,
      "avg_complexity": 3.74,
      "max_complexity": 24,
      "min_complexity": 1,
      "distribution": {
        "bassa_1_5": 86.0,
        "media_6_10": 10.0,
        "alta_11_15": 0.0,
        "molto_alta_16+": 4.0
      }
    },
    "complexity_stats": {
      "qualita_complessita": "Eccellente",
      "funzioni_problematiche": 2,
      "percentuale_buona_qualita": 96.0
    }
  },
  "thesis_ready": true
}