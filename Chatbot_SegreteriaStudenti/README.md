# CHATBOT SEGRETERIA STUDENTI

Sistema RAG per assistenza automatica agli studenti universitari.

## FUNZIONALIT√Ä

Il chatbot risponde a domande su:

- Iscrizioni agli esami
- Tasse e pagamenti
- Certificati e documenti
- Orari e contatti segreteria
- Servizi per studenti
- Carriera universitaria
- Orientamento e tirocini

---


# GUIDA RAPIDA

## IMPORTANTE - REQUISITO FONDAMENTALE

**Ogni comando Python richiede l'attivazione dell'ambiente virtuale `chatbot_env/`.**

Senza questo passaggio il progetto non funzioner√†.

---

## STEP 0: ATTIVAZIONE AMBIENTE VIRTUALE

```bash

cd C:\Users\miche\Desktop\TesiTriennale2025\Chatbot_SegreteriaStudenti### Sempre prima di ogni operazione

```

```bash

**Windows CMD:**# Naviga nella cartella principale

```cmdcd C:\Users\miche\Desktop\TesiTriennale2025\Chatbot_SegreteriaStudenti

chatbot_env\Scripts\activate.bat```

```

**Windows CMD:**

**Windows PowerShell:**```cmd

```powershellchatbot_env\Scripts\activate.bat

.\chatbot_env\Scripts\Activate.ps1```

```

**Windows PowerShell:**

**Linux/Mac:**```powershell

```bash.\chatbot_env\Scripts\Activate.ps1

source chatbot_env/bin/activate```

```

**Linux/Mac:**

### Verifica attivazione```bash

source chatbot_env/bin/activate

Il prompt deve mostrare `(chatbot_env)`:```

```

(chatbot_env) C:\Users\miche\...\Chatbot_SegreteriaStudenti>### Verifica attivazione

```

Il prompt deve mostrare `(chatbot_env)` all'inizio della riga:

---```

(chatbot_env) C:\Users\miche\Desktop\TesiTriennale2025\Chatbot_SegreteriaStudenti>

## STEP 1: VERIFICA DIPENDENZE```



**Verifica pacchetti:**Se non vedi `(chatbot_env)`, l'ambiente non √® attivo e i comandi Python falliranno

```powershell

pip list---

```

## STEP 1: VERIFICA DIPENDENZE

**Test librerie:**

Assicurati che l'ambiente virtuale sia attivo (vedi `(chatbot_env)` nel prompt).

**CMD:**

```cmd**Verifica pacchetti installati:**

python -c "import chromadb, sentence_transformers, streamlit; print('OK')"

```**CMD/PowerShell:**

```powershell

**PowerShell:**pip list

```powershell```

python -c "import chromadb, sentence_transformers, streamlit; print('OK')"

```**Test librerie principali:**



**Se mancano dipendenze:****CMD:**

```powershell```cmd

pip install -r requirements.txtpython -c "import chromadb, sentence_transformers, streamlit; print('Dipendenze OK')"

``````



---**PowerShell:**

```powershell

## STEP 2: AVVIA IL CHATBOTpython -c "import chromadb, sentence_transformers, streamlit; print('Dipendenze OK')"

```

### Checklist pre-avvio

- Ambiente virtuale attivo? `(chatbot_env)` visibile**Se mancano dipendenze:**

- Dipendenze installate? `pip list` mostra chromadb, streamlit

- Ollama avviato? Vedi sezione Ollama sotto**CMD/PowerShell:**

```powershell

### Modalit√† 1: Consolepip install -r requirements.txt

```

**CMD/PowerShell:**

```powershell---

python main.py

```## STEP 2: AVVIA IL CHATBOT



### Modalit√† 2: Interface Web (Streamlit)### Checklist pre-avvio

- Ambiente virtuale attivo? (`(chatbot_env)` visibile nel prompt)

**CMD/PowerShell:**- Dipendenze installate? (`pip list` mostra chromadb, streamlit)

```powershell- Ollama installato e avviato? (vedi sezione Ollama sotto)

streamlit run interfaccia/streamlit.py

```### Modalit√† 1: Console



Browser apre su: `http://localhost:8501`**CMD:**

```cmd

### Test rapidopython main.py

```

**CMD/PowerShell:**

```powershell**PowerShell:**

python src/creazione_vectorstore.py```powershell

```python main.py

```

---

Output atteso:

# RISOLUZIONE PROBLEMI```

Chatbot avviato! Digita la tua domanda...

## PROBLEMA 1: "ModuleNotFoundError"> Come mi iscrivo all'esame?

```

**Causa:** Ambiente virtuale non attivo.

### Modalit√† 2: Interface Web (Streamlit)

**CMD:**

```cmd**CMD:**

chatbot_env\Scripts\activate.bat```cmd

```streamlit run interfaccia/streamlit.py

```

**PowerShell:**

```powershell**PowerShell:**

.\chatbot_env\Scripts\Activate.ps1```powershell

```streamlit run interfaccia/streamlit.py

```

**Linux/Mac:**

```bashBrowser si apre automaticamente su: `http://localhost:8501`

source chatbot_env/bin/activate

```### Test rapido del sistema



---**CMD/PowerShell:**

```powershell

## PROBLEMA 2: "No module named 'chromadb'"python src/creazione_vectorstore.py

python evaluation/metriche_qualita.py

**Causa:** Dipendenze non installate.```

---

**Soluzione:**

```powershell# üõ†Ô∏è **RISOLUZIONE PROBLEMI**

pip install -r requirements.txt

```## **‚ùå PROBLEMI COMUNI E SOLUZIONI:**



**Verifica CMD:**### **ÔøΩ PROBLEMA #1: "ModuleNotFoundError" o "comando python non trovato"**

```cmd

pip list | findstr chromadb**Causa:** Ambiente virtuale NON attivo!

```

**Soluzione:**

**Verifica PowerShell:**```bash

```powershell# Controlla se vedi (chatbot_env) nel prompt

pip list | Select-String chromadb# Se NON lo vedi, attiva l'ambiente:

```

# Windows:

**Verifica Linux/Mac:**chatbot_env\Scripts\activate

```bash

pip list | grep chromadb# Linux/Mac:

```source chatbot_env/bin/activate



---# Ora riprova il comando che dava errore

```

## PROBLEMA 3: Ollama non risponde

---

**Installazione:**

- Windows: https://ollama.ai/download### **ÔøΩ PROBLEMA #2: "No module named 'chromadb'" (o altra libreria)**

- Linux: `curl -fsSL https://ollama.ai/install.sh | sh`

- Mac: `brew install ollama`**Causa:** Dipendenze non installate nell'ambiente virtuale



**Avvia servizio (terminale separato):****Soluzione:**

```bash```bash

ollama serve# 1. PRIMA attiva l'ambiente virtuale (vedi Problema #1)

```# 2. POI installa le dipendenze:



**Scarica modello:**pip install -r requirements.txt

```bash

ollama pull mistral# 3. Verifica installazione:

```pip list | findstr chromadb    # Windows

pip list | grep chromadb       # Linux/Mac

**Test connessione (con ambiente virtuale attivo):**```



**CMD:**---

```cmd

python -c "import requests; print(requests.get('http://localhost:11434').status_code)"### **üî¥ PROBLEMA #3: Ollama non risponde o errore connessione**

```

**Causa:** Ollama non installato o servizio non avviato

**PowerShell:**

```powershell**Soluzione:**

python -c "import requests; print(requests.get('http://localhost:11434').status_code)"

```**PASSO 1 - Installa Ollama:**

- **Windows**: Scarica da https://ollama.ai/download

Output atteso: `200`- **Linux**: `curl -fsSL https://ollama.ai/install.sh | sh`

- **Mac**: `brew install ollama`

---

**PASSO 2 - Avvia servizio Ollama:**

## PROBLEMA 4: Database vettoriale corrotto```bash

# Apri un NUOVO terminale separato (senza ambiente virtuale)

**CMD:**ollama serve

```cmd

rmdir /s /q vectordb# Tieni questo terminale aperto mentre usi il chatbot

python src/creazione_vectorstore.py```

```

**PASSO 3 - Scarica il modello:**

**PowerShell:**```bash

```powershell# In un ALTRO terminale separato

Remove-Item -Recurse -Force vectordbollama pull mistral

python src/creazione_vectorstore.py

```# Oppure (modello alternativo):

ollama pull llama2

**Linux/Mac:**```

```bash

rm -rf vectordb/**PASSO 4 - Testa connessione:**

python src/creazione_vectorstore.py```bash

```# Nel terminale CON ambiente virtuale attivo:

python -c "import requests; print(requests.get('http://localhost:11434').status_code)"

---

# Output atteso: 200

## PROBLEMA 5: Port 8501 gi√† in uso```



**Usa porta diversa:**---

```powershell

streamlit run interfaccia/streamlit.py --server.port 8502### **ÔøΩ PROBLEMA #4: Database vettoriale corrotto o errore ChromaDB**

```

**Causa:** Database vectordb/ danneggiato

**Chiudi processo CMD:**

```cmd**Soluzione:**

netstat -ano | findstr :8501```bash

taskkill /F /PID <PID_NUMBER># ‚ö†Ô∏è PRIMA attiva ambiente virtuale!

```

# 1. Elimina database corrotto

**Chiudi processo PowerShell:**# Windows:

```powershellrmdir /s /q vectordb

Get-Process -Id (Get-NetTCPConnection -LocalPort 8501).OwningProcess | Stop-Process -Force

```# Linux/Mac:

rm -rf vectordb/

**Chiudi processo Linux/Mac:**

```bash# 2. Ricrea database da zero

lsof -ti:8501 | xargs kill -9python src/creazione_vectorstore.py

```

# 3. Attendi completamento (~2-3 minuti)

---```



## PROBLEMA 6: Ambiente virtuale non si attiva (Windows)---



**PowerShell (esegui una volta):**### **üî¥ PROBLEMA #5: Port 8501 gi√† in uso (Streamlit)**

```powershell

Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser**Causa:** Un'altra istanza di Streamlit √® gi√† in esecuzione

```

**Soluzione:**

**Poi riprova:**```bash

```powershell# Opzione A - Usa porta diversa:

.\chatbot_env\Scripts\Activate.ps1streamlit run interfaccia/streamlit.py --server.port 8502

```

# Opzione B - Chiudi processo esistente:

---# Windows:

netstat -ano | findstr :8501

# STRUTTURA PROGETTOtaskkill /F /PID <PID_NUMBER>



```# Linux/Mac:

Chatbot_SegreteriaStudenti/lsof -ti:8501 | xargs kill -9

‚îú‚îÄ‚îÄ chatbot_env/              Ambiente virtuale - ATTIVARE SEMPRE```

‚îÇ   ‚îú‚îÄ‚îÄ Scripts/              

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ activate.bat      Attivazione CMD---

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Activate.ps1      Attivazione PowerShell

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ python.exe        Interprete Python isolato### **üî¥ PROBLEMA #6: Ambiente virtuale non si attiva**

‚îÇ   ‚îî‚îÄ‚îÄ Lib/site-packages/    Dipendenze installate

‚îÇ**Causa:** Permessi di esecuzione (Windows) o path errato

‚îú‚îÄ‚îÄ src/                      Codice sorgente

‚îÇ   ‚îú‚îÄ‚îÄ ollama_llm.py         Engine LLM (Mistral 7B)**Soluzione Windows:**

‚îÇ   ‚îú‚îÄ‚îÄ creazione_vectorstore.py  Database vettoriale```powershell

‚îÇ   ‚îú‚îÄ‚îÄ local_embeddings.py   Embeddings (all-MiniLM-L6-v2)# Se PowerShell blocca l'attivazione:

‚îÇ   ‚îú‚îÄ‚îÄ link_enhancer.py      Link automaticiSet-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

‚îÇ   ‚îú‚îÄ‚îÄ prompt_templates.py   Template prompt

‚îÇ   ‚îú‚îÄ‚îÄ dividi_chunks.py      Chunking documenti# Poi riprova:

‚îÇ   ‚îî‚îÄ‚îÄ testi_estratti.py     Estrazione PDFchatbot_env\Scripts\activate

‚îÇ```

‚îú‚îÄ‚îÄ interfaccia/

‚îÇ   ‚îî‚îÄ‚îÄ streamlit.py          Web app (localhost:8501)**Soluzione Linux/Mac:**

‚îÇ```bash

‚îú‚îÄ‚îÄ data/# Verifica che il file activate esista

‚îÇ   ‚îú‚îÄ‚îÄ FAQ/                  15 file FAQls chatbot_env/bin/activate

‚îÇ   ‚îú‚îÄ‚îÄ guida_dello_studente/ 4 PDF guide UniBG

‚îÇ   ‚îî‚îÄ‚îÄ testi_estratti/       Testi processati# Se manca, ricrea ambiente:

‚îÇpython3 -m venv chatbot_env

‚îú‚îÄ‚îÄ vectordb/                 Database ChromaDBsource chatbot_env/bin/activate

‚îÇ   ‚îú‚îÄ‚îÄ chroma.sqlite3        Database SQLitepip install -r requirements.txt

‚îÇ   ‚îî‚îÄ‚îÄ d55e47f0.../          Embeddings (384 dim)```

‚îÇ---

‚îú‚îÄ‚îÄ evaluation/               Sistema valutazione

‚îÇ   ‚îú‚îÄ‚îÄ metriche_avanzate.py  Metriche RAG# üìÅ **STRUTTURA REALE PROGETTO**

‚îÇ   ‚îú‚îÄ‚îÄ metriche_qualita.py   Qualit√† risposte

‚îÇ   ‚îî‚îÄ‚îÄ metriche_software.py  Metriche codice```

‚îÇüìÇ Chatbot_SegreteriaStudenti/

‚îú‚îÄ‚îÄ results/                  Risultati testing‚îú‚îÄ‚îÄ ÔøΩ chatbot_env/                 # ‚≠ê AMBIENTE VIRTUALE - ATTIVARE SEMPRE! ‚≠ê

‚îÇ   ‚îú‚îÄ‚îÄ metriche_rag_results.json‚îÇ   ‚îú‚îÄ‚îÄ Scripts/                   # Eseguibili Python e script attivazione

‚îÇ   ‚îú‚îÄ‚îÄ confronto_qualita_rag.png‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ activate.bat          # Attivazione Windows CMD

‚îÇ   ‚îî‚îÄ‚îÄ metriche_software_*.png‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Activate.ps1          # Attivazione Windows PowerShell

‚îÇ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ python.exe            # Interprete Python isolato

‚îú‚îÄ‚îÄ test/                     Suite test‚îÇ   ‚îú‚îÄ‚îÄ Lib/site-packages/        # Tutte le dipendenze installate

‚îÇ   ‚îú‚îÄ‚îÄ unit/                 Test unitari moduli src/‚îÇ   ‚îî‚îÄ‚îÄ pyvenv.cfg                # Configurazione ambiente

‚îÇ   ‚îú‚îÄ‚îÄ performance/          Test prestazionali‚îÇ

‚îÇ   ‚îú‚îÄ‚îÄ results/              Risultati + grafici PNG‚îú‚îÄ‚îÄ ÔøΩüìÅ src/                         # Codice sorgente principale

‚îÇ   ‚îî‚îÄ‚îÄ run_tests.py          Runner test‚îÇ   ‚îú‚îÄ‚îÄ ollama_llm.py              # Engine LLM (Mistral 7B) ‚≠ê

‚îÇ‚îÇ   ‚îú‚îÄ‚îÄ creazione_vectorstore.py   # Setup database vettoriale ChromaDB

‚îú‚îÄ‚îÄ documentazione/‚îÇ   ‚îú‚îÄ‚îÄ local_embeddings.py        # Gestione embeddings (all-MiniLM-L6-v2)

‚îÇ   ‚îú‚îÄ‚îÄ README.md             Questa guida‚îÇ   ‚îú‚îÄ‚îÄ link_enhancer.py           # Sistema link automatici nelle risposte

‚îÇ   ‚îú‚îÄ‚îÄ TECHNICAL_GUIDE.md    Guida tecnica‚îÇ   ‚îú‚îÄ‚îÄ prompt_templates.py        # Template ottimizzati per prompt

‚îÇ   ‚îú‚îÄ‚îÄ QUICK_START.md        Guida semplificata‚îÇ   ‚îú‚îÄ‚îÄ dividi_chunks.py           # Chunking intelligente documenti

‚îÇ   ‚îî‚îÄ‚îÄ INDICE.md             Indice documentazione‚îÇ   ‚îî‚îÄ‚îÄ testi_estratti.py          # Estrazione testi da PDF

‚îÇ‚îÇ

‚îú‚îÄ‚îÄ main.py                   Entry point - ChatbotRAG‚îú‚îÄ‚îÄ üìÅ interfaccia/                 # Interface utente

‚îú‚îÄ‚îÄ requirements.txt          Dipendenze Python‚îÇ   ‚îî‚îÄ‚îÄ streamlit.py               # Web app moderna (localhost:8501) ‚≠ê

‚îú‚îÄ‚îÄ start_chatbot.bat         Avvio rapido console‚îÇ

‚îî‚îÄ‚îÄ start_web.bat             Avvio rapido web‚îú‚îÄ‚îÄ üìÅ data/                        # Database conoscenza

```‚îÇ   ‚îú‚îÄ‚îÄ FAQ/                       # 15 file FAQ categorizzati

‚îÇ   ‚îú‚îÄ‚îÄ guida_dello_studente/      # 4 PDF guide ufficiali UniBG

### File chiave‚îÇ   ‚îî‚îÄ‚îÄ testi_estratti/            # Testi estratti e processati

‚îÇ

1. `main.py` - Classe `ChatbotRAG` con metodo `chat()`‚îú‚îÄ‚îÄ üìÅ vectordb/                    # Database vettoriale ChromaDB

2. `interfaccia/streamlit.py` - Interface web‚îÇ   ‚îú‚îÄ‚îÄ chroma.sqlite3             # Database SQLite principale

3. `src/ollama_llm.py` - Comunicazione Mistral 7B‚îÇ   ‚îî‚îÄ‚îÄ d55e47f0.../              # Embeddings vettoriali (384 dim)

4. `src/creazione_vectorstore.py` - Vector database‚îÇ

5. `requirements.txt` - Dipendenze‚îú‚îÄ‚îÄ üìÅ evaluation/                  # Sistema valutazione automatica

6. `test/run_tests.py` - Esegui test‚îÇ   ‚îú‚îÄ‚îÄ metriche_avanzate.py       # Metriche RAG (context/answer relevancy)

‚îÇ   ‚îú‚îÄ‚îÄ metriche_qualita.py        # Qualit√† risposte (completezza/utilit√†)

---‚îÇ   ‚îî‚îÄ‚îÄ metriche_software.py       # Metriche codice (WMC, LCOM, CBO)

‚îÇ

# ESEGUIRE I TEST‚îú‚îÄ‚îÄ üìÅ results/                     # Risultati testing e grafici

‚îÇ   ‚îú‚îÄ‚îÄ metriche_rag_results.json  # Risultati metriche RAG

**Prerequisito:** Ambiente virtuale attivo.‚îÇ   ‚îú‚îÄ‚îÄ confronto_qualita_rag.png  # Grafico confronto qualit√†

‚îÇ   ‚îî‚îÄ‚îÄ metriche_software_*.png    # Grafici metriche software

## Test unitari‚îÇ

‚îú‚îÄ‚îÄ üìÅ test/                        # Suite di test

Verifica moduli in `src/` senza errori logici.‚îÇ   ‚îú‚îÄ‚îÄ unit/                      # Test unitari moduli src/

‚îÇ   ‚îú‚îÄ‚îÄ performance/               # Test prestazionali chatbot reale

**CMD/PowerShell:**‚îÇ   ‚îú‚îÄ‚îÄ results/                   # Risultati test + grafici PNG

```powershell‚îÇ   ‚îî‚îÄ‚îÄ run_tests.py               # Runner principale test

python test/run_tests.py --unit‚îÇ

```‚îú‚îÄ‚îÄ üìÅ documentazione/              # Guide e documentazione

‚îÇ   ‚îú‚îÄ‚îÄ README.md                  # Questa guida! üìñ

Risultati: `test/results/unit_tests_results.json`‚îÇ   ‚îú‚îÄ‚îÄ TECHNICAL_GUIDE.md         # Guida tecnica dettagliata

‚îÇ   ‚îî‚îÄ‚îÄ README_GRAFICI.md          # Documentazione grafici tesi

**Moduli testati:**‚îÇ

- `local_embeddings.py`‚îú‚îÄ‚îÄ üìÑ main.py                      # ‚≠ê ENTRY POINT PRINCIPALE - ChatbotRAG ‚≠ê

- `dividi_chunks.py`‚îú‚îÄ‚îÄ üìÑ requirements.txt             # Lista dipendenze Python

- `ollama_llm.py`‚îú‚îÄ‚îÄ üìÑ setup.py                     # Script setup automatico

- `prompt_templates.py`‚îú‚îÄ‚îÄ ÔøΩ start_chatbot.bat            # Avvio rapido console (Windows)

- `creazione_vectorstore.py`‚îú‚îÄ‚îÄ üìÑ start_web.bat                # Avvio rapido web interface (Windows)

‚îî‚îÄ‚îÄ üìÑ aggiornamento_db.bat         # Aggiorna database vettoriale (Windows)

---

# üÜò **SUPPORTO**

## **üìû CONTATTI:**
- üéì **Studente**: Caprinali Michele  
- üìß **Email**: m.caprinali@studenti.unibg.it
- üêõ **Issue**: Repository GitHub